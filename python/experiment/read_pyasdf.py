#!/usr/bin/python

"""Example of reading and working with asdf h5 data"""

from obspy import Stream

from pyasdf import ASDFDataSet, WaveformNotInFileException

file_name = 'somewhere?'
# Start empty Stream
st = Stream()
# Initialize data set
ds = ASDFDataSet(file_name)
# Loop over all stations and read raw_waveforms for each
for netsta in ds.waveforms:
    try:
        st += netsta.raw_recording
    # Not all stations have waveform data so ignore these
    except WaveformNotInFileException:
        continue

# st.traces is a list of Trace objects
print(st.traces)
# Traces have a 'stats' attribute, which is a dictionary of metadata for each
print(st.traces[0].stats)
# Each trace also contains a "data" attribute that contains the raw data (numpy array)
print(st.traces[0].data)


# The sensor coordinates are below, if you end up needing them!
sensor_coords = {
    # in local coordinate system; x=East, y=North, z=elevation
    # Accelerometers [3x chans each]
    'B31': [2579324.461294, 1247590.3884, 488.9207],
    'B32': [2579324.127923, 1247564.5962, 458.3487],
    'B42': [2579329.86015, 1247595.4255, 488.2790],
    'B43': [2579335.9162, 1247574.0129, 455.0401],
    'B551': [2579328.42237, 1247584.2444, 500.6040],
    'B585': [2579321.582, 1247563.2318, 478.8632],
    'B647': [2579334.79024, 1247589.14718, 501.6884],
    'B659': [2579337.27833, 1247570.6516, 476.9351],
    'B748': [2579340.15296, 1247593.54974, 503.0410],
    'B75': [2579351.2349, 1247579.5168, 477.7178],
    # Hydrophones
    'B301': [2579324.496867, 1247592.9675, 491.9781],
    'B303': [2579324.451961, 1247589.7436, 488.1565],
    'B305': [2579324.405486, 1247586.5206, 484.3342],
    'B307': [2579324.365244, 1247583.3001, 480.5097],
    'B309': [2579324.324412, 1247580.0796, 476.6852],
    'B310': [2579324.304438, 1247578.4679, 474.7741],
    'B311': [2579324.286077, 1247576.8557, 472.8636],
    'B312': [2579324.267101, 1247575.2429, 470.9534],
    'B314': [2579324.22945, 1247572.0169, 467.1336],
    'B316': [2579324.185952, 1247568.7916, 463.3131],
    'B318': [2579324.14131, 1247565.5641, 459.4946],
    'B320': [2579324.091171, 1247562.3397, 455.6735],
    'B322': [2579324.032701, 1247559.1223, 451.8467],
    'B401': [2579329.17688, 1247597.8316, 492.0198],
    'B403': [2579329.93608, 1247595.1581, 487.8633],
    'B405': [2579330.69621, 1247592.4842, 483.7073],
    'B407': [2579331.45355, 1247589.8114, 479.5501],
    'B409': [2579332.20912, 1247587.1386, 475.3925],
    'B410': [2579332.58727, 1247585.8011, 473.3145],
    'B411': [2579332.96631, 1247584.4626, 471.2373],
    'B412': [2579333.34493, 1247583.1243, 469.1600],
    'B414': [2579334.09847, 1247580.4462, 465.0054],
    'B416': [2579334.85297, 1247577.7667, 460.8520],
    'B418': [2579335.6125, 1247575.0857, 456.7004],
    'B420': [2579336.3728, 1247572.4026, 452.5504],
    'B422': [2579337.1362, 1247569.7158, 448.4033],
    # AE sensors
    'B81': [2579328.5556, 1247576.5273, 488.0782],
    'B82': [2579328.4572, 1247575.8272, 487.3333],
    'B83': [2579328.1675, 1247573.7658, 485.1397],
    'B84': [2579328.0746, 1247573.1047, 484.4361],
    'B85': [2579327.7849, 1247571.0433, 482.2426],
    'B86': [2579327.6919, 1247570.3821, 481.5390],
    'B91': [2579332.5541, 1247582.7914, 476.1047],
    'B92': [2579332.6601, 1247582.2005, 475.2683],
    'B93': [2579332.9658, 1247580.4972, 472.8576],
    'B94': [2579333.0719, 1247579.9063, 472.0213],
    'B95': [2579333.3776, 1247578.2031, 469.6106],
    'B96': [2579333.4837, 1247577.6122, 468.7742],
}